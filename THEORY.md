# åŠ¨æ€FedRPç†è®ºåˆ†ææ¡†æ¶

## 1. é—®é¢˜å½¢å¼åŒ–

### 1.1 åŸå§‹FedRPä¼˜åŒ–é—®é¢˜

åœ¨åŸå§‹FedRPä¸­,æ¯ä¸ªå®¢æˆ·ç«¯$i$æ±‚è§£:

$$
\min_{w_i} f_i(w_i) + \frac{\alpha}{2}\|A_t w_i - z_t\|^2 + \langle y_i^t, A_t w_i - z_t \rangle
$$

æœåŠ¡å™¨èšåˆ:

$$
z_{t+1} = \frac{1}{K}\sum_{i=1}^K A_t w_i^{t+1}
$$

å…¶ä¸­:
- $w_i \in \mathbb{R}^d$: å®¢æˆ·ç«¯$i$çš„æ¨¡å‹å‚æ•°
- $A_t \in \mathbb{R}^{m \times d}$: ç¬¬$t$è½®çš„éšæœºæŠ•å½±çŸ©é˜µ
- $z_t \in \mathbb{R}^m$: æŠ•å½±ç©ºé—´ä¸­çš„å…¨å±€å…±è¯†å‘é‡
- $y_i^t \in \mathbb{R}^m$: å¯¹å¶å˜é‡
- $m$: æŠ•å½±ç»´åº¦(åŸå§‹FedRPä¸­å›ºå®š)

### 1.2 åŠ¨æ€FedRPæ‰©å±•

æˆ‘ä»¬çš„æ”¹è¿›:

$$
m_t = \mathcal{M}(t, z_{t-1}, z_{t-2}, \ldots)
$$

å…¶ä¸­$\mathcal{M}(\cdot)$æ˜¯ç»´åº¦è°ƒæ•´ç­–ç•¥:

**ç­–ç•¥1 - çº¿æ€§å¢é•¿**:
$$
m_t = \min(m_{\min} + \alpha_g \cdot t, m_{\max})
$$

**ç­–ç•¥2 - è‡ªé€‚åº”è°ƒæ•´**:
$$
m_t = \begin{cases}
\min(m_{t-1} + \Delta_{\text{inc}}, m_{\max}) & \text{if } r_t < \tau_{\text{low}} \\
\max(m_{t-1} - \Delta_{\text{dec}}, m_{\min}) & \text{if } r_t > \tau_{\text{high}} \\
m_{t-1} & \text{otherwise}
\end{cases}
$$

å…¶ä¸­ $r_t = \frac{\|z_t - z_{t-1}\|}{\|z_{t-1}\|}$ æ˜¯ç›¸å¯¹å˜åŒ–ç‡ã€‚

## 2. æ”¶æ•›æ€§åˆ†æ

### 2.1 å…³é”®å‡è®¾

**å‡è®¾1 (å±€éƒ¨Lipschitzè¿ç»­æ€§)**: å¯¹äºæ¯ä¸ªå®¢æˆ·ç«¯$i$,æŸå¤±å‡½æ•°$f_i$æ˜¯$L$-Lipschitzè¿ç»­çš„:
$$
\|\nabla f_i(w) - \nabla f_i(w')\| \leq L\|w - w'\|, \quad \forall w, w'
$$

**å‡è®¾2 (æœ‰ç•Œæ¢¯åº¦)**: å­˜åœ¨å¸¸æ•°$G$ä½¿å¾—:
$$
\|\nabla f_i(w)\| \leq G, \quad \forall w, i
$$

**å‡è®¾3 (ç»´åº¦æœ‰ç•Œæ€§)**: æŠ•å½±ç»´åº¦æ»¡è¶³:
$$
m_{\min} \leq m_t \leq m_{\max} < d, \quad \forall t
$$

**å‡è®¾4 (æŠ•å½±çŸ©é˜µæ€§è´¨)**: éšæœºæŠ•å½±çŸ©é˜µ$A_t$æ»¡è¶³Johnson-Lindenstrausså¼•ç†çš„æ¡ä»¶,å³å¯¹äºä»»æ„å‘é‡$v$,ä»¥é«˜æ¦‚ç‡æœ‰:
$$
(1-\epsilon)\|v\|^2 \leq \|A_t v\|^2 \leq (1+\epsilon)\|v\|^2
$$
å½“$m_t \geq O(\epsilon^{-2}\log(d))$æ—¶ã€‚

### 2.2 æ”¶æ•›æ€§å®šç†

**å®šç†1 (çº¿æ€§å¢é•¿ç­–ç•¥çš„æ”¶æ•›æ€§)**: 

åœ¨å‡è®¾1-4ä¸‹,å¦‚æœå­¦ä¹ ç‡$\eta_t = \frac{c}{\sqrt{t}}$ä¸”ADMMæƒ©ç½šå‚æ•°$\alpha$å……åˆ†å¤§,åˆ™FedRP_Linearç®—æ³•æ»¡è¶³:

$$
\mathbb{E}\left[\frac{1}{T}\sum_{t=1}^T \|\nabla f(w_t)\|^2\right] \leq \frac{C}{\sqrt{T}} + \mathcal{O}\left(\frac{\alpha_g}{\sqrt{m_{\min}}}\right)
$$

å…¶ä¸­$C$æ˜¯ä¾èµ–äº$L, G, \alpha$çš„å¸¸æ•°ã€‚

**è¯æ˜æ€è·¯**:
1. å°†åŠ¨æ€ç»´åº¦çš„å½±å“å»ºæ¨¡ä¸ºæ—¶å˜æ‰°åŠ¨
2. åˆ©ç”¨ADMMçš„æ”¶æ•›æ€§åˆ†ææ¡†æ¶
3. è¯æ˜ç»´åº¦å¢é•¿å¯¼è‡´çš„æŠ•å½±è¯¯å·®é€’å‡
4. åº”ç”¨éšæœºä¼˜åŒ–çš„æ”¶æ•›ç•Œ

**å®šç†2 (è‡ªé€‚åº”ç­–ç•¥çš„æ”¶æ•›æ€§)**:

åœ¨å‡è®¾1-4ä¸‹,å¦‚æœ$r_t$æœ€ç»ˆæ”¶æ•›åˆ°0(å³æ¨¡å‹æ”¶æ•›),åˆ™FedRP_Adaptiveç®—æ³•æ”¶æ•›åˆ°å…¨å±€ADMMç®—æ³•çš„$\epsilon$-é‚»åŸŸ:

$$
\lim_{T\to\infty} \mathbb{E}[f(\bar{w}_T)] \leq f^* + \epsilon(m_{\max})
$$

å…¶ä¸­$\epsilon(m)$æ˜¯ç”±æŠ•å½±ç»´åº¦$m$å†³å®šçš„é€¼è¿‘è¯¯å·®,æ»¡è¶³$\epsilon(m) \to 0$å½“$m \to d$ã€‚

## 3. å·®åˆ†éšç§åˆ†æ

### 3.1 å•è½®éšç§é¢„ç®—

å¯¹äºç¬¬$t$è½®,æŠ•å½±ç»´åº¦ä¸º$m_t$æ—¶,æ ¹æ®åŸè®ºæ–‡çš„å®šç†3.1,éšç§é¢„ç®—ä¸º:

$$
\epsilon_t = \frac{m_t \cdot C_{\text{clip}}}{\sigma_{\min} \cdot \sigma_{\text{noise}}}
$$

å…¶ä¸­:
- $C_{\text{clip}}$: è£å‰ªé˜ˆå€¼
- $\sigma_{\min}$: å‚æ•°å‘é‡çš„æœ€å°èŒƒæ•°ä¸‹ç•Œ
- $\sigma_{\text{noise}}$: æ·»åŠ çš„é«˜æ–¯å™ªå£°æ ‡å‡†å·®

### 3.2 å¤åˆéšç§é¢„ç®—

**æœ´ç´ ç»„åˆ**: æ€»éšç§é¢„ç®—ä¸º:
$$
\epsilon_{\text{total}} = \sum_{t=1}^T \epsilon_t = \frac{C_{\text{clip}}}{\sigma_{\min} \cdot \sigma_{\text{noise}}} \sum_{t=1}^T m_t
$$

å¯¹äº**çº¿æ€§å¢é•¿ç­–ç•¥**:
$$
\sum_{t=1}^T m_t = \sum_{t=1}^T \min(m_{\min} + \alpha_g t, m_{\max}) \approx \frac{T(m_{\min} + m_{\max})}{2}
$$

ç›¸æ¯”å›ºå®š$m = m_{\max}$çš„æƒ…å†µ,éšç§é¢„ç®—é™ä½çº¦50%ã€‚

**é«˜çº§ç»„åˆ** (Moments Accountant): å¯ä»¥è·å¾—æ›´ç´§çš„ç•Œ:
$$
\epsilon_{\text{total}} \leq \sqrt{2T\log(1/\delta)} \cdot \max_t \epsilon_t + T \cdot \max_t \epsilon_t^2
$$

**å®šç†3 (åŠ¨æ€DPä¿è¯)**: 

åœ¨åŠ¨æ€è°ƒæ•´ç­–ç•¥ä¸‹,å¦‚æœç»´åº¦å¢é•¿é€Ÿåº¦æ»¡è¶³$m_t = o(t)$,åˆ™æ€»éšç§é¢„ç®—ä¸º:
$$
\epsilon_{\text{total}} = O(\sqrt{T \cdot m_{\text{avg}} \cdot \log(1/\delta)})
$$
å…¶ä¸­$m_{\text{avg}} = \frac{1}{T}\sum_{t=1}^T m_t$ã€‚

## 4. é€šä¿¡å¤æ‚åº¦åˆ†æ

### 4.1 å•è½®é€šä¿¡æˆæœ¬

æ¯è½®é€šä¿¡æˆæœ¬:
- å®¢æˆ·ç«¯ä¸Šä¼ : $K \times m_t$ (æ¯ä¸ªå®¢æˆ·ç«¯ä¸Šä¼ $m_t$ç»´æŠ•å½±å‘é‡)
- æœåŠ¡å™¨ä¸‹å‘: $K \times d$ (ä¸‹å‘å®Œæ•´æ¨¡å‹å‚æ•°,å¯å¿½ç•¥æˆ–ä½¿ç”¨æ¨¡å‹å‹ç¼©)

å®é™…ä¸­ä¸»è¦è€ƒè™‘ä¸Šä¼ æˆæœ¬: $C_t = K \cdot m_t$

### 4.2 ç´¯ç§¯é€šä¿¡æˆæœ¬

**å®šç†4 (çº¿æ€§ç­–ç•¥çš„é€šä¿¡å¤æ‚åº¦)**:

FedRP_Linearåœ¨$T$è½®è®­ç»ƒä¸­çš„æ€»é€šä¿¡æˆæœ¬ä¸º:
$$
C_{\text{total}}^{\text{Linear}} = K \sum_{t=1}^T m_t = K \cdot T \cdot m_{\text{avg}}
$$

å…¶ä¸­:
$$
m_{\text{avg}} = \frac{m_{\min} + \min(m_{\min} + \alpha_g T, m_{\max})}{2}
$$

ç›¸æ¯”åŸå§‹FedRP $(m = m_{\max})$:
$$
\text{é€šä¿¡æˆæœ¬é™ä½ç‡} = 1 - \frac{m_{\text{avg}}}{m_{\max}} \approx 50\% \text{ (å½“ } m_{\min} \ll m_{\max})
$$

**å®šç†5 (è‡ªé€‚åº”ç­–ç•¥çš„é€šä¿¡å¤æ‚åº¦)**:

åœ¨æœ€åæƒ…å†µä¸‹(ç»´åº¦å§‹ç»ˆä¸º$m_{\max}$):
$$
C_{\text{total}}^{\text{Adaptive}} \leq K \cdot T \cdot m_{\max}
$$

åœ¨æœ€ä¼˜æƒ…å†µä¸‹(å¿«é€Ÿæ”¶æ•›,ç»´åº¦ä¿æŒåœ¨$m_{\min}$):
$$
C_{\text{total}}^{\text{Adaptive}} \geq K \cdot T \cdot m_{\min}
$$

å®é™…ä¸­,è‡ªé€‚åº”ç­–ç•¥çš„é€šä¿¡æˆæœ¬ä»‹äºä¸¤è€…ä¹‹é—´,å–å†³äºæ”¶æ•›é€Ÿåº¦ã€‚

### 4.3 é€šä¿¡-ç²¾åº¦æƒè¡¡

**å¼•ç†1**: æŠ•å½±è¯¯å·®æ»¡è¶³:
$$
\mathbb{E}[\|A_t w - w\|^2] \leq \epsilon(m_t) \|w\|^2
$$
å…¶ä¸­$\epsilon(m) = O(d/m)$æ ¹æ®JLå¼•ç†ã€‚

å› æ­¤,æ›´å¤§çš„$m_t$æ„å‘³ç€:
- âœ… æ›´é«˜çš„æ¨¡å‹ç²¾åº¦(æ›´å°çš„æŠ•å½±è¯¯å·®)
- âŒ æ›´å¤§çš„é€šä¿¡æˆæœ¬

åŠ¨æ€ç­–ç•¥é€šè¿‡åœ¨è®­ç»ƒæ—©æœŸä½¿ç”¨å°$m$,åæœŸä½¿ç”¨å¤§$m$,å®ç°äº†ä¸¤è€…çš„å¹³è¡¡ã€‚

## 5. Non-IIDæ•°æ®ä¸‹çš„åˆ†æ

### 5.1 Non-IIDåº¦é‡

ä½¿ç”¨Dirichletåˆ†å¸ƒ$\text{Dir}(\alpha)$åˆ’åˆ†æ•°æ®,å…¶ä¸­$\alpha$æ§åˆ¶å¼‚æ„ç¨‹åº¦:
- $\alpha \to 0$: é«˜åº¦Non-IID(æ¯ä¸ªå®¢æˆ·ç«¯åªæœ‰å°‘æ•°ç±»)
- $\alpha \to \infty$: IIDåˆ†å¸ƒ

å®¢æˆ·ç«¯é—´çš„æ•°æ®åˆ†å¸ƒå·®å¼‚å¯ç”¨KLæ•£åº¦åº¦é‡:
$$
D_{\text{KL}}(P_i \| P_j) = \sum_k P_i(k) \log \frac{P_i(k)}{P_j(k)}
$$

### 5.2 Non-IIDä¸‹çš„æ”¶æ•›æ€§

**å®šç†6 (Non-IIDä¸‹çš„æ”¶æ•›ç•Œ)**:

åœ¨Non-IIDè®¾ç½®ä¸‹,é¢å¤–å¼•å…¥æ•°æ®å¼‚æ„æ€§é¡¹$\gamma = \max_{i,j} D_{\text{KL}}(P_i \| P_j)$:

$$
\mathbb{E}[f(\bar{w}_T)] - f^* \leq \frac{C_1}{\sqrt{T}} + C_2 \gamma + \epsilon(m_{\text{avg}})
$$

å…¶ä¸­:
- ç¬¬ä¸€é¡¹: ä¼˜åŒ–è¯¯å·®(éš$T$è¡°å‡)
- ç¬¬äºŒé¡¹: æ•°æ®å¼‚æ„æ€§è¯¯å·®(å¸¸æ•°)
- ç¬¬ä¸‰é¡¹: æŠ•å½±è¯¯å·®(éš$m$å‡å°)

**æ¨è®º**: åŠ¨æ€ç­–ç•¥é€šè¿‡åœ¨åæœŸå¢å¤§$m_t$,å¯ä»¥æ›´å¥½åœ°æ•æ‰Non-IIDå¼•èµ·çš„å±€éƒ¨å·®å¼‚,ä»è€Œå‡å°æ€»è¯¯å·®ã€‚

## 6. å®éªŒéªŒè¯è¦ç‚¹

### 6.1 éœ€è¦éªŒè¯çš„å‡è®¾

1. âœ… çº¿æ€§å¢é•¿ç­–ç•¥ç¡®å®èƒ½é™ä½50%å·¦å³çš„é€šä¿¡æˆæœ¬
2. âœ… è‡ªé€‚åº”ç­–ç•¥èƒ½æ ¹æ®æ”¶æ•›çŠ¶æ€æ™ºèƒ½è°ƒæ•´
3. âœ… æœ€ç»ˆç²¾åº¦æ¥è¿‘å›ºå®šå¤§ç»´åº¦çš„FedRP
4. âœ… Non-IIDåœºæ™¯ä¸‹,åŠ¨æ€ç­–ç•¥æ›´é²æ£’

### 6.2 å…³é”®å®éªŒå›¾è¡¨

1. **æ”¶æ•›æ›²çº¿**: æµ‹è¯•ç²¾åº¦ vs è®­ç»ƒè½®æ¬¡
   - è¯æ˜åŠ¨æ€ç­–ç•¥æœ€ç»ˆèƒ½è¾¾åˆ°ç›¸è¿‘ç²¾åº¦

2. **é€šä¿¡-ç²¾åº¦æ›²çº¿**: æµ‹è¯•ç²¾åº¦ vs ç´¯ç§¯é€šä¿¡æˆæœ¬
   - è¯æ˜åŠ¨æ€ç­–ç•¥åœ¨å¸•ç´¯æ‰˜å‰æ²¿ä¸Šæ›´ä¼˜

3. **ç»´åº¦è½¨è¿¹**: $m_t$ vs $t$
   - çº¿æ€§ç­–ç•¥åº”å‘ˆç°çº¿æ€§å¢é•¿
   - è‡ªé€‚åº”ç­–ç•¥åº”éšæ”¶æ•›é€Ÿåº¦æ³¢åŠ¨

4. **æ¶ˆèå®éªŒ**: ä¸åŒå‚æ•°($\alpha_g$, $\tau$, $\Delta$)çš„å½±å“
   - è¯æ˜æ–¹æ³•å¯¹å‚æ•°ä¸æ•æ„Ÿ

### 6.3 ç†è®ºä¸å®éªŒå¯¹åº”

| ç†è®ºç»“æœ | å®éªŒéªŒè¯æ–¹æ³• |
|---------|-------------|
| å®šç†1: æ”¶æ•›ç•Œ | ç»˜åˆ¶æŸå¤±/ç²¾åº¦æ›²çº¿,éªŒè¯æ”¶æ•›é€Ÿåº¦ |
| å®šç†4: é€šä¿¡å¤æ‚åº¦ | è®¡ç®—ç´¯ç§¯é€šä¿¡æˆæœ¬,éªŒè¯é™ä½æ¯”ä¾‹ |
| å®šç†6: Non-IIDå½±å“ | å¯¹æ¯”IID vs Non-IIDçš„æ€§èƒ½å·®è· |

## 7. æœªæ¥æ‰©å±•æ–¹å‘

### 7.1 ç†è®ºæ”¹è¿›

1. **æ›´ç´§çš„æ”¶æ•›ç•Œ**: è€ƒè™‘æ›´ç²¾ç¡®çš„æŠ•å½±è¯¯å·®ä¼°è®¡
2. **ä¸ªæ€§åŒ–æ‰©å±•**: å¼•å…¥å®¢æˆ·ç«¯ç‰¹å®šçš„æŠ•å½±ç»´åº¦$m_i^t$
3. **è”åˆä¼˜åŒ–**: åŒæ—¶ä¼˜åŒ–$m_t$å’Œå…¶ä»–è¶…å‚æ•°(å­¦ä¹ ç‡ã€æƒ©ç½šå‚æ•°)

### 7.2 ç®—æ³•æ”¹è¿›

1. **å‹ç¼©æ„ŸçŸ¥**: ä½¿ç”¨ç¨€ç–æŠ•å½±çŸ©é˜µè¿›ä¸€æ­¥é™ä½æˆæœ¬
2. **æ¢¯åº¦æ ¡æ­£**: ç»“åˆSCAFFOLDç­‰æ–¹æ³•å‡å°‘å®¢æˆ·ç«¯æ¼‚ç§»
3. **å®‰å…¨èšåˆ**: ç»“åˆå®‰å…¨å¤šæ–¹è®¡ç®—å¢å¼ºéšç§

## 8. è®ºæ–‡æ’°å†™å»ºè®®

### 8.1 ç†è®ºéƒ¨åˆ†ç»“æ„

1. **Preliminaries**: ä»‹ç»ADMMã€éšæœºæŠ•å½±ã€JLå¼•ç†
2. **Algorithm**: ç»™å‡ºDynamicFedRPä¼ªä»£ç 
3. **Theoretical Analysis**:
   - Subsection 3.1: æ”¶æ•›æ€§åˆ†æ(å®šç†1-2)
   - Subsection 3.2: éšç§ä¿è¯(å®šç†3)
   - Subsection 3.3: é€šä¿¡å¤æ‚åº¦(å®šç†4-5)
   - Subsection 3.4: Non-IIDæ‰©å±•(å®šç†6)

### 8.2 å…³é”®å®šç†çš„è¯æ˜æ€è·¯

**å®šç†1è¯æ˜**:
1. å®šä¹‰Lyapunovå‡½æ•°$V_t = \|w_t - w^*\|^2 + \|z_t - z^*\|^2$
2. åˆ†æå•æ­¥æ›´æ–°çš„æœŸæœ›å˜åŒ–$\mathbb{E}[V_{t+1} - V_t]$
3. å°†ç»´åº¦å˜åŒ–å»ºæ¨¡ä¸ºæ‰°åŠ¨é¡¹,è¯æ˜å…¶æœ‰ç•Œæ€§
4. åº”ç”¨ä¸ç­‰å¼é“¾æ¨å¯¼æ”¶æ•›ç‡

**å®šç†3è¯æ˜**:
1. åº”ç”¨Gaussianæœºåˆ¶çš„éšç§ä¿è¯
2. ä½¿ç”¨Moments Accountantè¿›è¡Œéšç§é¢„ç®—ç´¯ç§¯
3. åˆ©ç”¨ç»´åº¦çš„æ¬¡çº¿æ€§å¢é•¿æ€§è´¨

## 9. æ€»ç»“

åŠ¨æ€FedRPçš„ç†è®ºè´¡çŒ®:

1. âœ¨ **æ–°é¢–æ€§**: é¦–æ¬¡æå‡ºåœ¨FLä¸­åŠ¨æ€è°ƒæ•´æŠ•å½±ç»´åº¦
2. ğŸ“Š **å®ç”¨æ€§**: æ˜¾è‘—é™ä½é€šä¿¡æˆæœ¬åŒæ—¶ä¿æŒç²¾åº¦
3. ğŸ”’ **éšç§æ€§**: æ”¹è¿›çš„å·®åˆ†éšç§ä¿è¯
4. ğŸ¯ **é€‚ç”¨æ€§**: å¯¹Non-IIDæ•°æ®æ›´é²æ£’

è¿™äº›ç†è®ºç»“æœä¸ºæ–¹æ³•çš„æœ‰æ•ˆæ€§æä¾›äº†åšå®çš„ç†è®ºåŸºç¡€,åŒæ—¶ä¸ºåç»­ç ”ç©¶æŒ‡æ˜äº†æ–¹å‘ã€‚
